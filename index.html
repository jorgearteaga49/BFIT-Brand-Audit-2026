<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auditoría BFIT 2026 | Estrategia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        input[type="range"] { accent-color: #4f46e5; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .option-btn.active {
            background-color: #4f46e5;
            border-color: #4f46e5;
            color: white;
            font-weight: 700;
        }
    </style>
</head>
<body class="bg-[#fafbfc] text-gray-900 pb-20 text-left">

    <nav class="border-b bg-white/80 backdrop-blur-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-indigo-600 rounded-2xl flex items-center justify-center font-black text-white italic shadow-lg text-xl">B</div>
                <div>
                    <span class="block font-black text-lg tracking-tighter text-gray-900 uppercase leading-none">BFIT AUDIT</span>
                    <span class="text-[10px] font-bold text-gray-400 uppercase tracking-[0.2em]">Estrategia 2026</span>
                </div>
            </div>
        </div>
    </nav>

    <main id="main-container" class="max-w-3xl mx-auto px-4 py-10">
        <!-- Vista Bienvenida -->
        <section id="view-welcome" class="flex flex-col items-center justify-center min-h-[70vh] text-center fade-in">
            <div class="bg-indigo-600 p-5 rounded-3xl mb-8 shadow-2xl rotate-3">
                <i data-lucide="layout" class="w-12 h-12 text-white"></i>
            </div>
            <h1 class="text-4xl font-black text-gray-900 mb-6 tracking-tight leading-tight">
                Auditoría Estratégica <span class="text-indigo-600">BFIT 2026</span>
            </h1>
            <p class="text-lg text-gray-600 mb-10 leading-relaxed">
                Este cuestionario busca extraer la <b>verdad incómoda</b> de la marca antes de decidir el rumbo 2026–2028. <br>Tus respuestas se enviarán directamente al equipo de estrategia.
            </p>
            <button onclick="startForm()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-10 rounded-2xl transition-all shadow-xl shadow-indigo-100 active:scale-95">
                Empezar Cuestionario
            </button>
            <p class="mt-12 text-xs text-gray-400 font-medium uppercase tracking-widest italic text-center">Confidencial · Socios y Equipo Clave</p>
        </section>

        <!-- Vista Formulario -->
        <section id="view-form" class="hidden fade-in text-left">
            <div class="mb-10">
                <div class="flex justify-between mb-3 text-xs font-black text-indigo-600 uppercase">
                    <span id="step-label">Sección 1 de 7</span>
                    <span id="progress-percent">0%</span>
                </div>
                <div class="w-full bg-gray-100 h-3 rounded-full overflow-hidden">
                    <div id="progress-bar" class="bg-indigo-600 h-full transition-all duration-700 ease-out" style="width: 0%"></div>
                </div>
            </div>

            <div id="questions-container" class="bg-white rounded-[40px] shadow-xl p-8 md:p-12 mb-8 border border-gray-50">
                <!-- Inyección JS -->
            </div>

            <div class="flex justify-between items-center">
                <button id="btn-prev" onclick="prevStep()" class="flex items-center gap-2 px-6 py-4 text-gray-400 font-bold hover:text-indigo-600 transition-colors">
                    <i data-lucide="chevron-left" class="w-5 h-5"></i> Anterior
                </button>
                <button id="btn-next" onclick="nextStep()" class="flex items-center gap-2 px-10 py-4 bg-indigo-600 text-white rounded-2xl font-bold shadow-xl shadow-indigo-100 active:scale-95">
                    Siguiente Sección <i data-lucide="chevron-right" class="w-5 h-5"></i>
                </button>
                <button id="btn-submit" onclick="submitForm()" class="hidden flex items-center gap-2 px-12 py-4 bg-green-600 text-white rounded-2xl font-bold shadow-xl shadow-green-100 active:scale-95">
                    Enviar Finalizado <i data-lucide="send" class="w-4 h-4"></i>
                </button>
            </div>
        </section>

        <!-- Vista Éxito -->
        <section id="view-success" class="hidden flex flex-col items-center justify-center min-h-[70vh] text-center fade-in">
            <div class="bg-green-100 p-6 rounded-[40px] mb-8 animate-bounce">
                <i data-lucide="check-circle" class="w-16 h-16 text-green-600"></i>
            </div>
            <h1 class="text-4xl font-black text-gray-900 mb-6 tracking-tight">¡Diagnóstico Recibido!</h1>
            <p class="text-lg text-gray-600 max-w-md mb-12 leading-relaxed text-center">
                Gracias por tu honestidad. Tus respuestas han sido enviadas vía correo electrónico para su procesamiento.
            </p>
            <button onclick="location.reload()" class="bg-gray-100 text-gray-600 font-bold py-3 px-8 rounded-xl">Volver al inicio</button>
        </section>
    </main>

    <script>
        const FORMSPREE_ID = "xvzobldp"; 

        const SECTIONS = [
            {
                title: "1 · Origen y Contexto",
                questions: [
                    { id: "Origen_Real", label: "¿Por qué nació BFIT realmente?", type: "textarea" },
                    { id: "Problema_Consumidor", label: "¿Qué problema concreto del consumidor detonó su creación?", type: "textarea" },
                    { id: "Diferencia_Fundadores", label: "¿Qué veían los fundadores que otros no veían?", type: "textarea" },
                    { id: "Problema_Humano_Hoy", label: "¿Qué problema resuelve BFIT hoy para el consumidor? (Problema humano)", type: "textarea" },
                    { id: "Tipo_Marca_Origen", label: "BFIT nació más como:", type: "select", options: ["Marca correctiva", "Marca alternativa", "Marca aspiracional", "Marca funcional", "Marca educativa"] },
                    { id: "Claridad_Consumidor", label: "¿Qué tan claro está esto para el consumidor hoy? (1-10)", type: "range", min: 1, max: 10 }
                ]
            },
            {
                title: "1.1 · Mapa Competitivo",
                questions: [
                    { id: "Top_10_Marcas", label: "¿Cuáles son hoy las 10 marcas más fuertes en México? (Percepción)", type: "textarea" },
                    { id: "Posicion_Ventas_Confianza", label: "¿En qué posición colocarías hoy a BFIT en Ventas y Confianza?", type: "textarea" },
                    { id: "Marcas_Comparativas", label: "¿Qué marcas compara el consumidor antes de comprar BFIT?", type: "textarea" },
                    { id: "Marcas_No_Comparar", label: "¿Con qué marcas NO debería compararse, pero hoy sí lo hace?", type: "textarea" }
                ]
            },
            {
                title: "2 · Crecimiento y Amazon",
                questions: [
                    { id: "Razones_Crecimiento", label: "¿Por qué crees que BFIT ha crecido al ritmo actual?", type: "checkbox", options: ["Calidad real", "Precio", "Amazon", "Branding", "Promociones", "Inercia"] },
                    { id: "Caso_BLife_9x", label: "Caso Amazon: ¿Por qué B Life vende 3x o 9x más?", type: "textarea" },
                    { id: "BFIT_vs_Otros", label: "BFIT vs B Life vs Birdman: ¿Cuál parece la 'mejor' a primera vista?", type: "textarea" },
                    { id: "Fuga_Ventas", label: "¿BFIT pierde ventas por falta de:", type: "checkbox", options: ["Claridad", "Atractivo", "Simplicidad", "Visibilidad"] }
                ]
            },
            {
                title: "3 · Portafolio e Identidad",
                questions: [
                    { id: "Estandar_Calidad", label: "¿Debe BFIT tener un solo estándar o varios niveles (Silver/Premium)?", type: "select", options: ["Un solo estándar", "Varios niveles"] },
                    { id: "Omega3_Basico", label: "¿Un Omega 3 'básico' de BFIT sería:", type: "select", options: ["Estrategia inteligente", "Riesgo de dilución", "Traición a la promesa", "Evolución natural"] },
                    { id: "Limite_Adaptacion", label: "¿Dónde está el límite entre adaptarse y ser lo mismo que criticamos?", type: "textarea" }
                ]
            },
            {
                title: "4 · Diseño y Percepción",
                questions: [
                    { id: "Empaque_Mensaje", label: "¿Qué comunica hoy el empaque de BFIT? (Percepción)", type: "textarea" },
                    { id: "Bolsa_vs_Bote", label: "¿Formato bolsa vs bote: a favor o en contra? ¿Por qué?", type: "textarea" },
                    { id: "Importancia_Unificacion", label: "¿Qué tan importante es la unificación visual en Amazon?", type: "textarea" }
                ]
            },
            {
                title: "5 · Consumidor Real",
                questions: [
                    { id: "Perfil_Consumidor", label: "Describe al consumidor real (Edad, NSE, Motivación, Miedos)", type: "textarea" },
                    { id: "Compra_Racional", label: "¿BFIT es una compra racional o emocional para él?", type: "textarea" },
                    { id: "Generar_Lealtad", label: "¿Qué tendría que pasar para que se volviera leal?", type: "textarea" }
                ]
            },
            {
                title: "6 · Propósito y Cierre",
                questions: [
                    { id: "Verdades_Incomodas", label: "¿Qué verdades incómodas estamos dispuestos a decirle al consumidor?", type: "textarea" },
                    { id: "BFIT_Persona", label: "Si BFIT fuera una persona, ¿qué tipo de persona sería?", type: "textarea" },
                    { id: "Crecimiento_Identidad", label: "¿Prefieres crecer lento con identidad fuerte o rápido con identidad difusa?", type: "textarea" },
                    { id: "BFIT_Existe_Para", label: "BFIT existe para...", type: "textarea" },
                    { id: "BFIT_Nunca_Ser", label: "BFIT nunca debería convertirse en...", type: "textarea" }
                ]
            }
        ];

        let currentStep = 0;
        let formData = {};

        window.showView = (viewName) => {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById(`view-${viewName}`).classList.remove('hidden');
            lucide.createIcons();
        };

        window.startForm = () => { currentStep = 0; renderStep(); showView('form'); };

        function renderStep() {
            const section = SECTIONS[currentStep];
            const container = document.getElementById('questions-container');
            const progress = ((currentStep + 1) / SECTIONS.length) * 100;

            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('step-label').innerText = `Sección ${currentStep + 1} de ${SECTIONS.length}`;
            document.getElementById('progress-percent').innerText = `${Math.round(progress)}%`;

            let html = `<h2 class="text-2xl font-black mb-8 border-b pb-4 tracking-tight text-indigo-600">${section.title}</h2><div class="space-y-10">`;
            
            section.questions.forEach(q => {
                html += `<div class="space-y-3"><label class="block font-bold text-gray-800 leading-snug">${q.label}</label>`;
                
                if (q.type === 'textarea') {
                    html += `<textarea onchange="updateData('${q.id}', this.value)" class="w-full p-4 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-2xl outline-none min-h-[120px] transition-all text-gray-700 font-medium">${formData[q.id] || ''}</textarea>`;
                } else if (q.type === 'select') {
                    html += `<select onchange="updateData('${q.id}', this.value)" class="w-full p-4 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-2xl outline-none appearance-none cursor-pointer">
                        <option value="">Selecciona una opción...</option>
                        ${q.options.map(o => `<option value="${o}" ${formData[q.id] === o ? 'selected' : ''}>${o}</option>`).join('')}
                    </select>`;
                } else if (q.type === 'checkbox') {
                    html += `<div class="grid grid-cols-1 sm:grid-cols-2 gap-3">`;
                    q.options.forEach(opt => {
                        const active = (formData[q.id] || []).includes(opt);
                        html += `
                            <button onclick="toggleCheckbox('${q.id}', '${opt}')" class="option-btn text-left p-4 rounded-xl border-2 transition-all text-sm ${active ? 'active' : 'bg-white border-gray-100 text-gray-600 hover:border-indigo-200'}">
                                ${opt}
                            </button>`;
                    });
                    html += `</div>`;
                } else if (q.type === 'range') {
                    html += `
                        <input type="range" min="${q.min}" max="${q.max}" value="${formData[q.id] || 5}" oninput="updateData('${q.id}', this.value); this.nextElementSibling.querySelector('.val').innerText = this.value" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-[10px] font-black text-gray-400 uppercase tracking-tighter">
                            <span>Bajo</span>
                            <span class="text-indigo-600 text-lg">Nivel: <span class="val">${formData[q.id] || 5}</span></span>
                            <span>Alto</span>
                        </div>`;
                }
                html += `</div>`;
            });
            container.innerHTML = html + `</div>`;

            document.getElementById('btn-prev').classList.toggle('opacity-0', currentStep === 0);
            document.getElementById('btn-next').classList.toggle('hidden', currentStep === SECTIONS.length - 1);
            document.getElementById('btn-submit').classList.toggle('hidden', currentStep !== SECTIONS.length - 1);
            lucide.createIcons();
        }

        window.updateData = (id, val) => { formData[id] = val; };
        
        window.toggleCheckbox = (id, opt) => {
            if(!formData[id]) formData[id] = [];
            if(formData[id].includes(opt)) {
                formData[id] = formData[id].filter(o => o !== opt);
            } else {
                formData[id].push(opt);
            }
            renderStep();
        };

        window.nextStep = () => { currentStep++; renderStep(); window.scrollTo({top: 0, behavior: 'smooth'}); };
        window.prevStep = () => { if(currentStep > 0) { currentStep--; renderStep(); window.scrollTo({top: 0, behavior: 'smooth'}); } };

        window.submitForm = async () => {
            const btn = document.getElementById('btn-submit');
            btn.disabled = true;
            btn.innerText = "Enviando...";
            try {
                const response = await fetch(`https://formspree.io/f/${FORMSPREE_ID}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                    body: JSON.stringify(formData)
                });
                if (response.ok) {
                    showView('success');
                } else {
                    alert("Error al enviar. Verifica tu conexión.");
                    btn.disabled = false;
                    btn.innerText = "Enviar Finalizado";
                }
            } catch (e) {
                alert("Error de conexión.");
                btn.disabled = false;
                btn.innerText = "Enviar Finalizado";
            }
        };
        lucide.createIcons();
    </script>
</body>
</html>
